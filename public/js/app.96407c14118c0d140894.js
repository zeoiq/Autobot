function AbotConfig(a,b){a.theme("default").primaryPalette("blue").accentPalette("blue-grey"),b.when("/main",{templateUrl:"view/main.html",controller:"botTwitterController"}).when("/fb",{templateUrl:"view/fb.html",controller:"botFBController"}).when("/iislog",{templateUrl:"view/iislog.html",controller:"botIISLogController"}).otherwise({redirectTo:"/main"})}function CurrentTimeDirective(a,b){return function(c,d,e){function f(){d.text(b(new Date,g))}var g,h;c.$watch(e.myCurrentTime,function(a){g=a,f()}),h=a(f,1e3),d.on("$destroy",function(){a.cancel(h)})}}angular.module("autobotSearch",["ngRoute","twitterController","fbController","iisLogController","autobotService","autobotScrapeService","iisLogService","settingService","smart-table","myCurrentTime"]).config(AbotConfig),AbotConfig.$inject=["$mdThemingProvider","$routeProvider"],function(){"use strict";function a(a,b,c,d,e,f,g,h){a.format="d MMM yyyy - h:mm:ss a",a.modes=!0,a.isLoading=!0,a.userState=1,a.states="0 1 2 3 4 5 10 15 20 25 30".split(" ").map(function(a){return{abbrev:a}}),a.intervals=1e3,a.countdownTimer=60*a.userState,a.callbackTimerFinished=function(){a.getTweet(a.tweetData,void 0),a.$digest()},a.changeInterval=function(){a.stopClock(),a.countdownTimer=60*a.userState,a.$broadcast("timer-set-countdown",a.countdownTimer),a.resetClock(),a.countdownTimer>0&&angular.isDefined(a.tweetData)&&a.startClock()},a.timerRunning=!1;var i=!1;a.startClock=function(){i?i&&!a.timerRunning&&(a.$broadcast("timer-resume"),a.timerRunning=!0):(a.$broadcast("timer-start"),a.timerRunning=!0,i=!0)},a.stopClock=function(){i&&a.timerRunning&&(a.$broadcast("timer-stop"),a.timerRunning=!1)},a.resetClock=function(){a.timerRunning||a.$broadcast("timer-reset")},a.$on("timer-stopped",function(a,b){i=!0}),a.getFB=function(){f.path("/fb")},a.getTwitter=function(){f.path("/main")},a.getIISLog=function(){f.path("/iislog")},a.itemTwitters=[],a.isAdd=!0,a.getTweetsLink=function(){g.get().success(function(b){a.itemTwitters=[],angular.forEach(b,function(b,c){a.itemTwitters.push({id:b._id,tweetName:b.twitterName,linkTweets:b.tweetsLink,linkTweetsReplies:b.tweetsRepliesLink})})}).error(function(a){d.debug("Error: "+a)})},a.addTweetsLink=function(b){$.isEmptyObject(b)||g.create(b).success(function(b){a.twit={},a.itemTwitters=[],angular.forEach(b,function(b,c){a.itemTwitters.push({id:b._id,tweetName:b.twitterName,linkTweets:b.tweetsLink,linkTweetsReplies:b.tweetsRepliesLink})})}).error(function(a){d.debug("Error: "+a)})},a.editTwitterLink=function(b,c,d){a.isAdd=!1,angular.forEach(a.itemTwitters,function(b,d){b.id===c&&(a.twit={id:b.id,twitterName:b.tweetName,tweetsLink:b.linkTweets,tweetsRepliesLink:b.linkTweetsReplies})})},a.cancelTwitterLink=function(){a.twit=void 0,a.isAdd=!0},a.updateTwitterLink=function(b){$.isEmptyObject(b)||g.put(b).success(function(b){a.twit={},a.itemTwitters=[],angular.forEach(b,function(b,c){a.itemTwitters.push({id:b._id,tweetName:b.twitterName,linkTweets:b.tweetsLink,linkTweetsReplies:b.tweetsRepliesLink})}),a.isAdd=!0}).error(function(a){d.debug("Error: "+a)})},a.deleteTwitterLink=function(b,c){$.isEmptyObject(b)||g["delete"](b).success(function(b){a.itemTwitters=[],angular.forEach(b,function(b,c){a.itemTwitters.push({id:b._id,tweetName:b.twitterName,linkTweets:b.tweetsLink,linkTweetsReplies:b.tweetsRepliesLink})})}).error(function(a){d.debug("Error: "+a)})},a.tweet=[{tweet:"",image:"",tweetDetails:[{avatar:"assets/img/default.png",fullname:"Autobot",username:"@autobot",time:"2015"}]}],a.tweetReplies=[{tweet:"",image:"",gotConversation:"true",tweetDetails:[{avatar:"assets/img/default.png",fullname:"Autobot",username:"@autobot",time:"2015"}]}],a.tweetData=void 0,a.getTweet=function(b,e){return angular.isDefined(e)&&"A"===e.target.tagName?void 0:(a.isLoading=!1,a.tweetData=b,c(function(){var c=b.linkTweets;h.scrapeTweets(c).success(function(b){d.debug(JSON.stringify(b)),a.tweet=b}).error(function(a){d.debug("Error: "+a)});var e=b.linkTweetsReplies;h.scrapeTweetsReplies(e).success(function(b){a.tweetReplies=b,a.isLoading=!0}).error(function(a){d.debug("Error: "+a)}),angular.isDefined(a.tweetData)?(a.stopClock(),a.resetClock(),a.startClock()):a.startClock()},200))},a.tweetsReplies=[{tweet:"",image:"",tweetDetails:[{avatar:"assets/img/default.png",fullname:"Autobot",username:"@autobot",time:"2015"}]}],a.getTweetsReplies=function(a,b){return c(function(){var c=a;h.scrapeTweets(c).success(function(a){b.tweetsReplies=[];for(var c=0;c<a.length;c++)a[c].tweetDetails.length>0&&b.tweetsReplies.push(a[c])}).error(function(a){d.debug("Error: "+a)})},200)},a["export"]=function(a,b){var c=angular.element("<a/>");c.attr({href:"data:attachment/json;charset=utf-8,"+encodeURI(JSON.stringify(a,null,4)),target:"_blank",download:b+".json"})[0].click()},a.exportTweets=function(){return c(function(){var b=a.tweetData.linkTweets;h.exportTweets(b).success(function(b){a["export"](b,"tweets")}).error(function(a){d.debug("Error: "+a)})},200)},a.exportTweetsReplies=function(){return c(function(){var b=a.tweetData.linkTweetsReplies;h.exportTweetsReplies(b).success(function(b){a["export"](b,"tweetsReplies")}).error(function(a){d.debug("Error: "+a)})},200)},a.exportConversation=function(b){return c(function(){var c=b.hideCvstLink;h.exportConversation(c).success(function(b){a["export"](b,"conversation")}).error(function(a){d.debug("Error: "+a)})},200)}}angular.module("twitterController",["ngMaterial","ngMessages","timer"]).controller("botTwitterController",a),a.$inject=["$scope","$http","$timeout","$log","$interval","$location","botService","botScrapeService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){a.format="d MMM yyyy - h:mm:ss a",a.modes=!0,a.isLoading=!0,a.userState=1,a.states="0 1 2 3 4 5 10 15 20 25 30".split(" ").map(function(a){return{abbrev:a}}),a.intervals=1e3,a.countdownTimer=60*a.userState,a.callbackTimerFinished=function(){a.getPosts(a.postData,void 0),a.$digest()},a.changeInterval=function(){a.stopClock(),a.countdownTimer=60*a.userState,a.$broadcast("timer-set-countdown",a.countdownTimer),a.resetClock(),a.countdownTimer>0&&angular.isDefined(a.postData)&&a.startClock()},a.timerRunning=!1;var j=!1;a.startClock=function(){j?j&&!a.timerRunning&&(a.$broadcast("timer-resume"),a.timerRunning=!0):(a.$broadcast("timer-start"),a.timerRunning=!0,j=!0)},a.stopClock=function(){j&&a.timerRunning&&(a.$broadcast("timer-stop"),a.timerRunning=!1)},a.resetClock=function(){a.timerRunning||a.$broadcast("timer-reset")},a.$on("timer-stopped",function(a,b){j=!0}),a.getFB=function(){f.path("/fb")},a.getTwitter=function(){f.path("/main")},a.getIISLog=function(){f.path("/iislog")},a.itemFBPosts=[],a.isAdd=!0,a.getFBsLink=function(){a.itemFBPosts=[{fbPostName:"Maybank",fbPostImage:"assets/img/maybank.jpg",fbPageID:"Maybank",linkFBPost:"https://www.facebook.com/Maybank"},{fbPostName:"CIMB Malaysia",fbPostImage:"assets/img/cimb.jpeg",fbPageID:"CIMBMalaysia",linkFBPost:"https://www.facebook.com/CIMBMalaysia"}]},a.addTweetsLink=function(b){$.isEmptyObject(b)||h.create(b).success(function(b){a.twit={},a.itemFBPosts=[],angular.forEach(b,function(b,c){a.itemFBPosts.push({id:b._id,fbPostName:b.twitterName,fbPageID:b.tweetsLink,linkFBPost:b.tweetsRepliesLink})})}).error(function(a){d.debug("Error: "+a)})},a.editTwitterLink=function(b,c,d){a.isAdd=!1,angular.forEach(a.itemFBPosts,function(b,d){b.id===c&&(a.twit={id:b.id,twitterName:b.fbPostName,tweetsLink:b.fbPageID,tweetsRepliesLink:b.linkFBPost})})},a.cancelTwitterLink=function(){a.twit=void 0,a.isAdd=!0},a.updateTwitterLink=function(b){$.isEmptyObject(b)||h.put(b).success(function(b){a.twit={},a.itemFBPosts=[],angular.forEach(b,function(b,c){a.itemFBPosts.push({id:b._id,fbPostName:b.twitterName,fbPageID:b.tweetsLink,linkFBPost:b.tweetsRepliesLink})}),a.isAdd=!0}).error(function(a){d.debug("Error: "+a)})},a.deleteTwitterLink=function(b,c){$.isEmptyObject(b)||h["delete"](b).success(function(b){a.itemFBPosts=[],angular.forEach(b,function(b,c){a.itemFBPosts.push({id:b._id,fbPostName:b.twitterName,fbPageID:b.tweetsLink,linkFBPost:b.tweetsRepliesLink})})}).error(function(a){d.debug("Error: "+a)})},a.tweet=[{tweet:"",image:"",tweetDetails:[{avatar:"assets/img/default.png",fullname:"Autobot",username:"@autobot",time:"2015"}]}],a.fbPosts=[{message:"",image:"",gotComments:"true",postDetails:[{avatar:"assets/img/default.png",fullname:"Autobot",username:"@autobot",time:"2015"}]}],a.postData=void 0,a.getPosts=function(b,e){return angular.isDefined(e)&&"A"===e.target.tagName?void 0:(a.isLoading=!1,a.postData=b,c(function(){i.scrapeFBPost(b.fbPageID).success(function(b){var c=JSON.parse(b);a.fbPosts=[],angular.forEach(c.data,function(b,c){var d="assets/img/fb.png";b.from.name==a.postData.fbPostName&&(d=a.postData.fbPostImage),a.fbPosts.push({message:b.message,image:b.full_picture,gotComments:"true",postDetails:[{avatar:d,fullname:b.from.name,username:b.from.id,time:g("date")(new Date(b.created_time),"hh:mm a - dd MMM yyyy")}]})}),a.isLoading=!0}).error(function(a){d.debug("Error: "+a)}),angular.isDefined(a.postData)?(a.stopClock(),a.resetClock(),a.startClock()):a.startClock()},200))},a.tweetsReplies=[{tweet:"",image:"",tweetDetails:[{avatar:"assets/img/default.png",fullname:"Autobot",username:"@autobot",time:"2015"}]}],a.getTweetsReplies=function(a,b){return c(function(){var c=a;i.scrapeTweets(c).success(function(a){b.tweetsReplies=[];for(var c=0;c<a.length;c++)a[c].tweetDetails.length>0&&b.tweetsReplies.push(a[c])}).error(function(a){d.debug("Error: "+a)})},200)},a["export"]=function(a,b){var c=angular.element("<a/>");c.attr({href:"data:attachment/json;charset=utf-8,"+encodeURI(JSON.stringify(a,null,4)),target:"_blank",download:b+".json"})[0].click()},a.exportTweets=function(){return c(function(){var b=a.postData.fbPageID;i.exportTweets(b).success(function(b){a["export"](b,"tweets")}).error(function(a){d.debug("Error: "+a)})},200)},a.exportTweetsReplies=function(){return c(function(){var b=a.postData.linkFBPost;i.exportTweetsReplies(b).success(function(b){a["export"](b,"tweetsReplies")}).error(function(a){d.debug("Error: "+a)})},200)},a.exportConversation=function(b){return c(function(){var c=b.hideCvstLink;i.exportConversation(c).success(function(b){a["export"](b,"conversation")}).error(function(a){d.debug("Error: "+a)})},200)}}angular.module("fbController",["ngMaterial","ngMessages","timer"]).controller("botFBController",a),a.$inject=["$scope","$http","$timeout","$log","$interval","$location","$filter","botService","botScrapeService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){a.format="d MMM yyyy - h:mm:ss a",a.modes=!0,a.isLoading=!0,a.userState=1,a.states="0 1 2 3 4 5 10 15 20 25 30".split(" ").map(function(a){return{abbrev:a}}),a.intervals=1e3,a.countdownTimer=60*a.userState,a.callbackTimerFinished=function(){a.getPosts(a.postData,void 0),a.$digest()},a.changeInterval=function(){a.stopClock(),a.countdownTimer=60*a.userState,a.$broadcast("timer-set-countdown",a.countdownTimer),a.resetClock(),a.countdownTimer>0&&angular.isDefined(a.postData)&&a.startClock()},a.timerRunning=!1;var i=!1;a.startClock=function(){i?i&&!a.timerRunning&&(a.$broadcast("timer-resume"),a.timerRunning=!0):(a.$broadcast("timer-start"),a.timerRunning=!0,i=!0)},a.stopClock=function(){i&&a.timerRunning&&(a.$broadcast("timer-stop"),a.timerRunning=!1)},a.resetClock=function(){a.timerRunning||a.$broadcast("timer-reset")},a.$on("timer-stopped",function(a,b){i=!0}),a.getFB=function(){f.path("/fb")},a.getTwitter=function(){f.path("/main")},a.getIISLog=function(){f.path("/iislog")},a.itemsByPage=10,a.iisLogStatusCollection=[],a.iisLogNoOfHitsAPICollection=[],a.iisLogErrorStatusCollection=[],a.itemIISLogStatus=[].concat(a.iisLogStatusCollection),a.itemIISLogNoOfHitsAPI=[].concat(a.iisLogNoOfHitsAPICollection),a.itemIISLogErrorStatus=[].concat(a.iisLogErrorStatusCollection),a.load_iislogstatus_lib=function(){a.getIISLogStatusReport(),a.getIISLogErrorStatusReport(),a.getIISLogNoOfHitsAPIReport()},a.getIISLogStatusReport=function(){h.getIISLogStatus().success(function(b){var c=[],d=[],e="";angular.forEach(b,function(b,f){e=b.serverName;var g=b.iisLogStatus.iisLogStatusDetails,h=0;angular.forEach(g,function(b,e){a.iisLogStatusCollection.push({apiLink:b.apiLink,averageTimeTaken:b.averageTimeTaken,maxTimeTaken:b.maxTimeTaken,minTimeTaken:b.minTimeTaken}),h<g.length/2?c.push({c:[{v:b.apiLink},{v:parseInt(b.averageTimeTaken)},{v:parseInt(b.maxTimeTaken)},{v:parseInt(b.minTimeTaken)}]}):d.push({c:[{v:b.apiLink},{v:parseInt(b.averageTimeTaken)},{v:parseInt(b.maxTimeTaken)},{v:parseInt(b.minTimeTaken)}]}),h++})}),a.getIISlogStatusColChart(e,c),a.getIISlogStatusColChart1(e,d)}).error(function(a){d.debug("Error: "+a)})},a.getIISLogNoOfHitsAPIReport=function(){h.getIISLogNoOfHitsAPI().success(function(b){var c=[],d=[],e="";angular.forEach(b,function(b,f){e=b.serverName;var g=b.iisLogNoOfHitsAPI.iisLogNoOfHitsAPIDetails,h=0;angular.forEach(g,function(b,e){a.iisLogNoOfHitsAPICollection.push({apiLink:b.apiLink,noOfHits:b.noOfHits}),h<g.length/2?c.push({c:[{v:b.apiLink},{v:parseInt(b.noOfHits)}]}):d.push({c:[{v:b.apiLink},{v:parseInt(b.noOfHits)}]}),h++})}),a.getIISLogNoOfHitsAPIColChart(e,c),a.getIISLogNoOfHitsAPIColChart1(e,d)}).error(function(a){d.debug("Error: "+a)})},a.getIISLogErrorStatusReport=function(){h.getIISLogErrorStatus().success(function(b){var c=[],d="";angular.forEach(b,function(b,e){d=b.serverName;var f=b.iisLogErrorStatus.iisLogErrorStatusDetails;angular.forEach(f,function(b,d){a.iisLogErrorStatusCollection.push({status:b.status,total:b.total}),c.push({c:[{v:b.status},{v:parseInt(b.total)}]})})}),a.getIISlogErrorStatusBarChart(d,c)}).error(function(a){d.debug("Error: "+a)})};var j=[{id:"api",label:"API Link",type:"string"},{id:"ave",label:"Average Time",type:"number"},{id:"max",label:"Max Time",type:"number"},{id:"min",label:"Min Time",type:"number"}],k="Time taken based on API link - Server : ";a.getIISlogStatusColChart=function(b,c){a.iisLogStatusColChart={},a.iisLogStatusColChart.type="ColumnChart",a.iisLogStatusColChart.data={cols:j,rows:c},a.iisLogStatusColChart.options={title:k+b}},a.getIISlogStatusColChart1=function(b,c){a.iisLogStatusColChart1={},a.iisLogStatusColChart1.type="ColumnChart",a.iisLogStatusColChart1.data={cols:j,rows:c},a.iisLogStatusColChart1.options={title:k+b}};var l=[{id:"api",label:"API Link",type:"string"},{id:"noh",label:"No of Hits",type:"number"}],m="No of hits based on API link - Server : ";a.getIISLogNoOfHitsAPIColChart=function(b,c){a.iisLogNoOfHitsAPIColChart={},a.iisLogNoOfHitsAPIColChart.type="ColumnChart",a.iisLogNoOfHitsAPIColChart.data={cols:l,rows:c},a.iisLogNoOfHitsAPIColChart.options={title:m+b}},a.getIISLogNoOfHitsAPIColChart1=function(b,c){a.iisLogNoOfHitsAPIColChart1={},a.iisLogNoOfHitsAPIColChart1.type="ColumnChart",a.iisLogNoOfHitsAPIColChart1.data={cols:l,rows:c},a.iisLogNoOfHitsAPIColChart1.options={title:m+b}},a.getIISlogErrorStatusBarChart=function(b,c){var d={cols:[{id:"s",label:"Status Code",type:"string"},{id:"t",label:"Total of hits",type:"number"}],rows:c};a.iisLogErrorStatusBarChart={},a.iisLogErrorStatusBarChart.type="BarChart",a.iisLogErrorStatusBarChart.data=d,a.iisLogErrorStatusBarChart.options={title:"Status Code Report - Server : "+b}},a.hideSeries=function(b){if(void 0!==b){if(void 0!==b.column){var c=b.column,e=b.row;d.debug("col: "+JSON.stringify(c)+" - row: "+JSON.stringify(e));var f=a.iisLogNoOfHitsAPIColChart.data.rows[e].c;d.debug(f.length+" - "+f[0].v);var g=f[0].v;h.getIISLogNoOfHitsAPICIP(g).success(function(b){var c=[],d="B";angular.forEach(b,function(a,b){c.push({c:[{v:a.sourceIP},{v:parseInt(a.noOfHits)}]})}),a.getIISLogNoOfHitsAPIColChart(d,c)}).error(function(a){d.debug("Error: "+a)})}null===b.row}},a.errorStatusAPI=function(b){if(void 0!==b){if(void 0!==b.column){var c=b.column,e=b.row;d.debug("col: "+JSON.stringify(c)+" - row: "+JSON.stringify(e));var f=a.iisLogErrorStatusBarChart.data.rows[e].c;d.debug(f.length+" - "+f[0].v);var g=f[0].v;h.getIISLogErrorStatusByAPI(g).success(function(b){var c=[],d="B";angular.forEach(b,function(a,b){c.push({c:[{v:a.apiLink},{v:parseInt(a.noOfHits)}]})}),a.getIISlogErrorStatusBarChart(d,c)}).error(function(a){d.debug("Error: "+a)})}null===b.row}}}angular.module("iisLogController",["ngMaterial","ngMessages","timer","googlechart"]).controller("botIISLogController",a),a.$inject=["$scope","$http","$timeout","$log","$interval","$location","$filter","botIISLogService"]}(),function(){"use strict";function a(a,b){var c="",d=!1;return d&&(c="http://localhost:8080"),{getAPIURL:function(){return c}}}angular.module("settingService",[]).factory("SettingService",a),a.$inject=["$http","$log"]}(),function(){"use strict";function a(a,b,c){var d=c.getAPIURL();return{get:function(){return a.get(d+"/api/twitterLink")},put:function(b){return a({method:"PUT",url:d+"/api/twitterLink",params:{twitterLinkData:b}})},create:function(b){return a({method:"POST",url:d+"/api/twitterLink",params:{twitterLinkData:b}})},"delete":function(b){return a["delete"](d+"/api/twitterLink/"+b)}}}angular.module("autobotService",[]).factory("botService",a),a.$inject=["$http","$log","SettingService"]}(),function(){"use strict";function a(a,b,c){var d=c.getAPIURL();return{exportTweets:function(b){return a({method:"GET",url:d+"/api/exportTweets",params:{urlText:b}})},exportTweetsReplies:function(b){return a({method:"GET",url:d+"/api/exportTweetsReplies",params:{urlText:b}})},exportConversation:function(b){return a({method:"GET",url:d+"/api/exportConversation",params:{urlText:b}})},scrapeTweets:function(b){return a.post(d+"/api/scrapeTweets",{urlText:b})},scrapeTweetsReplies:function(b){return a.post(d+"/api/scrapeTweetsReplies",{urlText:b})},scrapeFBPost:function(b){return a.post(d+"/api/scrapeFBPost",{fbName:b})}}}angular.module("autobotScrapeService",[]).factory("botScrapeService",a),a.$inject=["$http","$log","SettingService"]}(),function(){"use strict";function a(a,b,c){var d=c.getAPIURL();return{getIISLogStatus:function(){return a.get(d+"/api/iisLogStatus")},getIISLogErrorStatus:function(){return a.get(d+"/api/iisLogErrorStatus")},getIISLogNoOfHitsAPI:function(){return a.get(d+"/api/iisLogNoOfHitsAPI")},getIISLogNoOfHitsAPICIP:function(c){return b.debug("-->"+c),a({method:"GET",url:d+"/api/iisLogNoOfHitsAPICIP",params:{apiLink:c}})},getIISLogErrorStatusByAPI:function(c){return b.debug("-->"+c),a({method:"GET",url:d+"/api/iisLogErrorStatusByAPI",params:{errorCode:c}})},put:function(b){return a({method:"PUT",url:d+"/api/twitterLink",params:{twitterLinkData:b}})},create:function(b){return a({method:"POST",url:d+"/api/twitterLink",params:{twitterLinkData:b}})},"delete":function(b){return a["delete"](d+"/api/twitterLink/"+b)}}}angular.module("iisLogService",[]).factory("botIISLogService",a),a.$inject=["$http","$log","SettingService"]}(),angular.module("myCurrentTime",["timer"]).directive("myCurrentTime",CurrentTimeDirective),CurrentTimeDirective.$inject=["$interval","dateFilter"];